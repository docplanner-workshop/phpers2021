paths:
  - ./../src
exclude_files:
  - '#.*Test.*#'
  - '#.*Tests.*#'
layers:
  - name: Events
    collectors:
      - type: bool
        must:
          - type: implements
            implements: 'App\Shared\MessageBus\Event'
  - name: Application
    collectors:
      - type: bool
        must:
          - type: className
            regex: App\\Core\\Visit\\Application\.*
  - name: Domain
    collectors:
      - type: bool
        must:
          - type: className
            regex: App\\Core\\Visit\\Domain\.*
        must-not:
          - type: implements
            implements: 'App\Shared\MessageBus\Event'
  - name: Infrastructure
    collectors:
      - type: bool
        must:
          - type: className
            regex: App\\Core\\Visit\\Infrastructure\.*
  - name: Shared
    collectors:
      - type: bool
        must:
          - type: className
            regex: App\\Shared\.*
  - name: System
    collectors:
      - type: bool
        must:
          - type: className
            regex: App\.*
        must-not:
          - type: className
            regex: App\\Core\\Visit\.*
          - type: className
            regex: App\\DataFixtures\.*
          - type: className
            regex: App\\Shared\.*
          - type: className
            regex:  Doctrine\\ORM\\Mapping

ruleset:
  Application:
    - Domain
    - Shared
    - Events
  Domain:
    - Shared
  Infrastructure:
    - Domain
    - Application
    - Shared
    - System
  System:
    - Shared
    - Events
  Shared:
    - System
  Events:
    - Shared


